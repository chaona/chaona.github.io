<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">
        <title>my</title>
        <!-- 引入 WeUI CDN 链接 -->
        <link rel="stylesheet" href="https://res.wx.qq.com/open/libs/weui/2.3.0/weui.min.css"/>

        <style type="text/css">
            /** 使用weui变量来开发黑暗模式 **/
            .body {
                background-color: var(--weui-BG-0);
            }

            .page .placeholder {
    margin: 5px;
    padding: 0 10px;
    background-color: var(--weui-BG-1);
    height: 2.3em;
    line-height: 2.3;
    text-align: center;
    color: var(--weui-FG-1);
}
        </style>
    </head>
    <body>

<div id="box"  style="text-align:center; padding: 20px;">
    <h1>404 Not Found <span id="showPwd">!</span> </h1>
    <hr>
    <span>nginx</span>
</div>

<div class="page" id="chekPwd" style="display: none;">
  <div class="weui-form">
    <div class="weui-form__text-area">
      <h2 class="weui-form__title">login</h2>
      <!-- <div class="weui-form__desc">验证手机号样式</div> -->
    </div>
    <div class="weui-form__control-area">
      <div class="weui-cells__group weui-cells__group_form">
        <div class="weui-cells">
            <div class="weui-cell weui-cell_active">
                <div class="weui-cell__hd"><label for="js_input1" class="weui-label">phone</label></div>
                <div class="weui-cell__bd">
                    <input id="js_input1" class="weui-input" type="number" placeholder="+44 " value=""/>
                </div>
                <div class="weui-cell__ft">
                  <button type="button" id="showIOSDialog1" class="weui-btn_reset weui-btn_icon">
                    <i role="img" alt="帮助" class="js_target weui-icon-info-circle"></i>
                  </button>
                </div>
            </div>
            <div id="js_cell_vcode" class="weui-cell weui-cell_active weui-cell_vcode weui-cell_wrap">
                <div class="weui-cell__hd"><label for="js_input2" class="weui-label">code</label></div>
                <div class="weui-cell__bd weui-flex">
                  <input id="js_input2" class="weui-input weui-cell__control weui-cell__control_flex" type="text" placeholder="max length 6 " maxlength="6"/>
                  <button id="js_input_clear" class="weui-btn_reset weui-btn_icon weui-btn_input-clear">
                    <i class="weui-icon-clear"></i>
                  </button>
                  <button id="js_btn_vcode" role="button" class="js_target weui-cell__control weui-btn weui-btn_default weui-vcode-btn">get</button>
                </div>
            </div>
        </div>
        <!-- <div class="weui-cells__tips"><a class="weui-link weui-wa-hotarea" href="javascript:">收不到验证码</a></div> -->
      </div>
    </div>

    <div class="weui-form__opr-area">
      <button class="weui-btn weui-btn_primary" type="button" onclick="checkInput()">GO</button>
    </div>
  </div>
  
  
</div>





<script src="lib/jquery.js"></script>
<script src="lib/common.js?v=1.1"></script>

<script type="text/javascript" src="https://res.wx.qq.com/t/wx_fed/weui.js/res/1.2.18/weui.min.js"></script>
<script src="https://res.wx.qq.com/open/js/jweixin-1.6.0.js"></script>



<script type="text/javascript">
    // 检查登录状态
    if(window.base.getCookie('accessusertoken')){
        window.location.href = 'user.html';
    } 

    $('#showIOSDialog1').click(function(){
        weui.topTips( 'Only supports UK phone.', 3000 );
    });

    $('#showPwd').click(function(){
        weui.confirm('This website is not open to the public. Please leave', function () {
            console.log('yes');
        }, function () {
            console.log('no');
            $('#box').hide();
            $('#chekPwd').show();

        }, {
            title: 'WARNING! '
        });
    });

    $('#js_btn_vcode').click(function(){
        checkCode();
    });

    function checkCode() {
        var phone = $('#js_input1').val();

        if(!isUKPhoneNumber(phone)){
            weui.topTips( 'Mobile number not registered.', 3000 );
            return;
        }

        weui.toast('Send code success.', {
            duration: 3000,
            // className: 'custom-classname',
            callback: function(){
                // window.location.href = window.base.g_restUrl;
                // alert("last:"+JSON.stringify(res));
            }
        });
    }

        

    function checkInput() {
        var phone = $('#js_input1').val();
        var vcode = $('#js_input2').val();

        if(phone == '' || phone == undefined) {
            weui.topTips('Mobile phone number is required.', 3000);
            return;
        }

        if(vcode == '' || vcode == undefined) {
            weui.topTips('Code is required.', 3000);
            return;
        }

        if(!checkLogin(phone, vcode)){
            weui.topTips('Mobile phone number or code error.', 3000);
            return ;
        }

        weui.toast('SUCCESS', {
            duration: 1000,
            // className: 'custom-classname',
            callback: function(){
                var accessusertoken = new Date().getTime()+7*24*60*60*1000;
                window.base.setCookie('accessusertoken', accessusertoken);
                window.location.href = 'user.html';
            }
        });
        
    }

    function isUKPhoneNumber(number) {
        var regex = /^(?:(?:\+|00)44\s?|0)[1-9]\d{1,4}(\s?\d{3,4}){1,2}$/;
        return regex.test(number);
    }
</script>



    </body>
</html>











